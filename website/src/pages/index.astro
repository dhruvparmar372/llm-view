---
import Layout from "../layouts/Layout.astro";

const horizontalLine = "─".repeat(120);
---

<Layout title="LLM View — Any webpage, as clean markdown">
  <main class="mx-auto max-w-3xl px-6 py-24 sm:py-32">
    <!-- Header -->
    <header class="mb-20 text-center">
      <p class="mb-4 text-sm tracking-wide text-(--color-accent)">
        <span class="text-(--color-text-dim)">$</span> llm-view
      </p>
      <h1 class="text-3xl font-semibold leading-tight tracking-tight sm:text-4xl">
        Any webpage, as clean<br />markdown. One click.<span
          class="inline-block w-2.5 h-5 ml-1 bg-(--color-accent) align-middle"
          style="animation: blink 1s step-end infinite;"
        ></span>
      </h1>
      <p class="mx-auto mt-6 max-w-lg text-sm leading-relaxed text-(--color-text-muted)">
        A browser extension that strips away the noise and gives you clean,
        structured markdown from any page — ready to drop into ChatGPT,
        Claude, or whatever you're working with.
      </p>
      <div class="mt-8 flex items-center justify-center gap-4">
        <button
          id="install-btn"
          class="inline-flex items-center border border-(--color-accent) px-5 py-2.5 text-sm font-medium text-(--color-accent) transition-colors hover:bg-(--color-accent) hover:text-(--color-bg) cursor-pointer"
        >
          [ Install Extension ]
        </button>
        <a
          href="https://github.com/dhruvparmar372/llm-view"
          rel="noopener"
          class="inline-flex items-center border border-(--color-border) px-5 py-2.5 text-sm font-medium text-(--color-text-muted) transition-colors hover:border-(--color-text-dim) hover:text-(--color-text)"
        >
          [ View Source ]
        </a>
      </div>
    </header>

    <!-- Demo Video Hero -->
    <section class="mb-20" aria-labelledby="demo-heading">
      <h2 id="demo-heading" class="sr-only">Demo</h2>
      <div class="overflow-hidden rounded-xl border border-(--color-border) bg-(--color-surface)">
        <video
          class="w-full"
          controls
          autoplay
          muted
          loop
          playsinline
          preload="metadata"
          width="1276"
          height="1050"
        >
          <source src="/demo.webm" type="video/webm" />
          <source src="/demo.mp4" type="video/mp4" />
          Your browser does not support the video tag.
        </video>
      </div>
      <p class="mt-4 text-center text-sm font-medium text-(--color-text-muted)">
        <span class="text-(--color-accent)">&gt;</span> Click the toggle. Get markdown. That's it.
      </p>
    </section>

    <!-- Privacy Banner -->
    <section class="mb-20 border border-(--color-border) px-6 py-5">
      <p class="text-sm text-(--color-text)">
        <span class="text-(--color-accent)">~</span> Your data never leaves your browser. Everything runs locally — no servers, no tracking, no accounts. Just you and your pages.
      </p>
      <p class="mt-2 text-xs text-(--color-text-dim)">
        Don't take our word for it —
        <a
          href="https://github.com/dhruvparmar372/llm-view"
          rel="noopener"
          class="text-(--color-text-muted) underline underline-offset-4 transition-colors hover:text-(--color-accent)"
        >
          read the source
        </a>
      </p>
    </section>

    <!-- Footer -->
    <footer class="pt-8 text-center text-xs text-(--color-text-dim)">
      <p class="mb-6 text-(--color-border) overflow-hidden whitespace-nowrap">
        {horizontalLine}
      </p>
      <p>
        <span class="text-(--color-accent)">$</span> LLM View &mdash; Open source on
        <a
          href="https://github.com/dhruvparmar372/llm-view"
          rel="noopener"
          class="text-(--color-text-muted) underline underline-offset-4 transition-colors hover:text-(--color-accent)"
        >
          GitHub
        </a>
      </p>
    </footer>
  </main>

  <!-- Install Modal -->
  <div id="install-modal" class="fixed inset-0 z-50 hidden items-center justify-center">
    <div id="modal-backdrop" class="absolute inset-0 bg-black/70"></div>
    <div class="relative mx-4 w-full max-w-md border border-(--color-border) bg-(--color-bg) p-8">
      <button id="modal-close" class="absolute top-4 right-4 text-(--color-text-dim) transition-colors hover:text-(--color-text) cursor-pointer text-sm">
        [ x ]
      </button>
      <h2 class="mb-6 text-lg font-semibold text-(--color-text)">
        <span class="text-(--color-accent)">$</span> install
      </h2>
      <ol class="space-y-5 text-sm">
        <li class="flex gap-3">
          <span class="text-(--color-accent) shrink-0">1.</span>
          <div>
            <p class="text-(--color-text)">Download the extension</p>
            <a
              href="https://github.com/dhruvparmar372/llm-view/releases/download/latest/llm-view.zip"
              class="mt-1 inline-flex items-center border border-(--color-accent) px-3 py-1.5 text-xs font-medium text-(--color-accent) transition-colors hover:bg-(--color-accent) hover:text-(--color-bg)"
            >
              [ Download llm-view.zip ]
            </a>
          </div>
        </li>
        <li class="flex gap-3">
          <span class="text-(--color-accent) shrink-0">2.</span>
          <div>
            <p class="text-(--color-text)">Open the extensions page in Chrome</p>
            <p class="mt-1 text-xs text-(--color-text-dim)">
              Go to <code class="text-(--color-text-muted)">chrome://extensions</code> and enable <strong class="text-(--color-text-muted)">Developer mode</strong>
            </p>
          </div>
        </li>
        <li class="flex gap-3">
          <span class="text-(--color-accent) shrink-0">3.</span>
          <div>
            <p class="text-(--color-text)">Drag and drop the zip file</p>
            <p class="mt-1 text-xs text-(--color-text-dim)">
              Drop <code class="text-(--color-text-muted)">llm-view.zip</code> onto the extensions page — done.
            </p>
          </div>
        </li>
      </ol>
    </div>
  </div>
</Layout>

<script>
  const btn = document.getElementById('install-btn');
  const modal = document.getElementById('install-modal');
  const backdrop = document.getElementById('modal-backdrop');
  const closeBtn = document.getElementById('modal-close');

  function openModal() {
    modal?.classList.remove('hidden');
    modal?.classList.add('flex');
  }

  function closeModal() {
    modal?.classList.add('hidden');
    modal?.classList.remove('flex');
  }

  btn?.addEventListener('click', openModal);
  backdrop?.addEventListener('click', closeModal);
  closeBtn?.addEventListener('click', closeModal);
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') closeModal();
  });
</script>
